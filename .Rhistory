knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(tidyr)
library(ggplot2)
df <- read.csv("Downloads/USACSCORES.csv", header=TRUE)
dfl <- gather(df, key="Test", value="Score", -Track.Level)
dflgrp <- dfl %>% group_by(Track.Level, Test) %>%
summarise(n=n(), mean=mean(Score), low=mean-1.96*sd(Score)/n, high=mean+1.96*sd(Score)/n)
ggplot(dflgrp)+
geom_point(mapping=aes(x=Test, y=mean, col=Track.Level))+
geom_line(mapping=aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.5)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.5)
df <- read.csv("Downloads/USACSCORES.csv", header=TRUE)
dfl <- gather(df, key="Test", value="Score", -Track.Level)
dfl$Test <- factor(df$Test, levels = c("Pre","Post"))
dfl$Test <- factor(dfl$Test, levels = c("Pre","Post"))
dflgrp <- dfl %>% group_by(Track.Level, Test) %>%
summarise(n=n(), mean=mean(Score), low=mean-1.96*sd(Score)/n, high=mean+1.96*sd(Score)/n)
ggplot(dflgrp)+
geom_point(mapping=aes(x=Test, y=mean, col=Track.Level))+
geom_line(mapping=aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.5)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.5)
ggplot(dflgrp, aes(col=Track.Level))+
geom_point(mapping=aes(x=Test, y=mean, col=Track.Level), size=2)+
geom_line(mapping=aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+ylab("Score")+ggtitle("Means and 95% ConFidence Levels by Track Level, from Pre- to Post-Test")
ggplot(dflgrp, aes(col=Track.Level))+
geom_point(mapping=aes(x=Test, y=mean, col=Track.Level), size=1)+
geom_line(mapping=aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+ylab("Score")+ggtitle("Means and 95% ConFidence Levels <br>by Track Level, from Pre- to Post-Test")
ggplot(dflgrp, aes(col=Track.Level))+
geom_point(mapping=aes(x=Test, y=mean, col=Track.Level), size=1)+
geom_line(mapping=aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_fill_discrete(name="Track Level", breaks=c("A","B","C","D"))
ggplot(dflgrp, aes(col=Track.Level))+
geom_point(mapping=aes(x=Test, y=mean, col=Track.Level), size=1)+
geom_line(mapping=aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_color_discrete(name="Track Level", breaks=c("A","B","C","D"))
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_color_discrete(name="Track Level", breaks=c("A","B","C","D"))
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_color_discrete(name="Track Level", breaks=c("A","B","C","D"))
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_color_discrete(name="Track Level", breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_color_discrete(name="Track Level", breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_color_discrete(name="Track Level", breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, col=Track.Level), alpha=0.8)
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_color_discrete(name="Track Level", breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, fill=Track.Level), alpha=0.8)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, fill=Track.Level), alpha=0.8)
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
ylab("Score")+ggtitle("Slope-Graph of Performance by Track Level")+scale_color_discrete(name="Track Level", breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",], mapping=aes(x=Test, ymin=low, ymax=high, fill=Track.Level), alpha=0.8, show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",], mapping=aes(x=Test, ymin=low, ymax=high, fill=Track.Level), alpha=0.8, show.legend = FALSE)
#draw scatter plot with regression lines
ggplot(df, aes(x=Pre, y=Post, col=Track.Level))+
geom_point()+
geom_smooth(method="lm", formula = Post~Pre+Track)
#draw scatter plot with regression lines
ggplot(df, aes(x=Pre, y=Post, col=Track.Level))+
geom_point()+
geom_smooth(method="lm")
#draw scatter plot with regression lines
ggplot(df, aes(x=Pre, y=Post, col=Track.Level))+
geom_point()+
geom_smooth(method="lm", formula = y~x)
lm(Post~Pre+Track.Level, data=df)
lm(Post~Pre*Track.Level, data=df)
#draw scatter plot with regression lines
ggplot(df, aes(x=Pre, y=Post, col=Track.Level))+
geom_point()+
geom_smooth(method="lm", se=FALSE)
pp<-lm(Post~Pre, data=df)
ggplot(pp, aes(x=.fitted, y=.resid))+geom_point()
pp
summary(pp)
sqrt(mean(pp$residuals^2))
pp2<-lm(Post~Pre*Track.Level, data=df)
sqrt(mean(pp2$residuals^2))
ggplot(pp2, aes(x=.fitted, y=.resid))+geom_point()
summary(pp2)
#draw slope-graph
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
ylab("Score")+
ggtitle("Slope-Graph of Performance by Track Level")+
scale_color_discrete(name="Track Level",
breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level), alpha=0.8,
show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level), alpha=0.8,
show.legend = FALSE)
#draw slope-graph
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=1)+
geom_line()+
ylab("Score")+
ggtitle("Slope-Graph of Performance by Track Level")+
scale_color_discrete(name="Track Level",
breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level), size=3,
show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level), size=3,
show.legend = FALSE)
#draw slope-graph
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=3)+
geom_line()+
ylab("Score")+
ggtitle("Slope-Graph of Performance by Track Level")+
scale_color_discrete(name="Track Level",
breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level), size=2,
show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level), size=2,
show.legend = FALSE)
#draw slope-graph
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=2)+
geom_line()+
ylab("Score")+
ggtitle("Slope-Graph of Performance by Track Level")+
scale_color_discrete(name="Track Level",
breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level), size=1.5,
show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level), size=1.5,
show.legend = FALSE)
#draw slope-graph
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=2)+
geom_line()+
ylab("Score")+
ggtitle("Slope-Graph of Performance by Track Level")+
scale_color_discrete(name="Track Level",
breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level),
size=1.5, alpha=.4,
show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level),
size=1.5, alpha=.4,
show.legend = FALSE)
#draw slope-graph
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=2)+
geom_line()+
ylab("Score")+
ggtitle("Slope-Graph of Performance by Track Level")+
scale_color_discrete(name="Track Level",
breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level),
size=1.5, alpha=.2,
show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level),
size=1.5, alpha=.2,
show.legend = FALSE)
#draw slope-graph
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=2)+
geom_line()+
ylab("Score")+
ggtitle("Slope-Graph of Performance by Track Level")+
scale_color_discrete(name="Track Level",
breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level),
size=1.5, alpha=.1,
show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level),
size=1.5, alpha=.1,
show.legend = FALSE)
#draw slope-graph
ggplot(dflgrp, aes(x=Test, y=mean, col=Track.Level, group=Track.Level))+
geom_point( size=2)+
geom_line()+
ylab("Score")+
ggtitle("Slope-Graph of Performance by Track Level")+
scale_color_discrete(name="Track Level",
breaks=c("A","B","C","D"))+
geom_ribbon(data=dflgrp[dflgrp$Test=="Pre",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level),
size=1.5,
show.legend = FALSE)+
geom_ribbon(data=dflgrp[dflgrp$Test=="Post",],
mapping=aes(x=Test, ymin=low, ymax=high,
fill=Track.Level),
size=1.5,
show.legend = FALSE)
library(dplyr)
install.packages(c("assertthat", "backports", "broom", "caret", "clipr", "data.table", "ggplot2", "gtable", "httpuv", "openssl", "reticulate", "rlang", "rvest", "shiny", "tinytex", "xfun"))
install.packages('stringi')
install.packages("caret")
devtools::install_github('mattflor/chorddiag')
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
library(dplyr)
library(tidyr)
library(stringr)
library(RColorBrewer)
library(chorddiag)
mmh <- read.csv("../../static/files/maps-minor-historical-cleaned.csv", header = TRUE) %>% select(-c(Major2, Concentration))
mmhl <- gather(mmh, key=mNum, value = minor, -c(Grad.Year, Major1, Degree)) %>% mutate(minor = str_to_lower(str_trim(minor, side = "both"))) %>% rename(MAJOR = Major1)
qual_cols = brewer.pal.info[brewer.pal.info$category == 'qual',]
many_colors = unlist(mapply(brewer.pal, qual_cols$maxcolors, rownames(qual_cols)))
chorddiag(
xtabs(~MAJOR+minor, data = mmhl[mmhl$Grad.Year == 2017,],
drop.unused.levels = TRUE),
showTicks = FALSE, groupColors = many_colors, type = "bipartite"
)
setwd('/home/jpreszler/github/jpreszler/')
blogdown::serve_site()
