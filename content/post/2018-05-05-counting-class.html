---
title: "Counting Classes: The Basics"
author: "Jason Preszler"
date: 2018-05-05
tags: ["R", "scrape", "rvest"]
output: html_document
---



<p>At the College of Idaho, there’s been discussion about visualizing the curriculum as well as understanding the curriculum. Naturally this interests me as a chance to wallow in some complicated data (students are required to complete a major and 3 minors across 4 “peaks” rather than complete courses from a traditional “core”). I thought using R and a Neo4j graph database would be useful (something to look forward to) - but first I needed to get data from the catalogue!</p>
<div id="web-scraping" class="section level1">
<h1>Web Scraping</h1>
<p>Web scraping is one the essential data science skills that I’m not as fluent in as I would like to be, so getting the course data from the catalogue is a nice chance to hone my skills. The <code>rvest</code> package (from Hadley Wickham) is a great tool for web scraping in R and combines well with <code>stringr</code> text manipulation functions and the <code>SelectorGadget</code> chrome extension.</p>
<p>We’ll start by getting a list of all subjects in the catalogue, with links to the subject page which has the class list in that subject.</p>
<pre class="r"><code>base_url &lt;- &quot;http://collegeofidaho.smartcatalogiq.com&quot;
base_url_ext &lt;- &quot;/en/current/Undergraduate-Catalog/Courses&quot;

#read base page
base_html &lt;- read_html(paste0(base_url,base_url_ext))
#extract links from base page
subjectLinks &lt;- html_nodes(base_html, &#39;a&#39;)
#convert links to text
subjectText &lt;- html_text(subjectLinks)
subjectText &lt;- subjectText[78:120]
#keep url for each subject also
sub_url &lt;- html_attr(subjectLinks, &#39;href&#39;)[78:120]

subDF &lt;- str_split(subjectText,pattern= &#39;-&#39;, n=2, 
                   simplify=TRUE) %&gt;% as.data.frame()
names(subDF) &lt;- c(&quot;sub&quot;, &quot;subject&quot;)
subDF &lt;-mutate(subDF, sub = str_trim(sub, side = &quot;both&quot;), 
               subject = str_trim(subject, side = &quot;both&quot;), 
               url=paste0(base_url,sub_url))

kable(head(subDF),&quot;html&quot;) %&gt;%  
  kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;,                                   &quot;condensed&quot;, &quot;responsive&quot;), full_width=FALSE) </code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
sub
</th>
<th style="text-align:left;">
subject
</th>
<th style="text-align:left;">
url
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
Accounting
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
ART
</td>
<td style="text-align:left;">
Art
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ART-Art" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ART-Art</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
ASN
</td>
<td style="text-align:left;">
Asian Studies
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ASN-Asian-Studies" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ASN-Asian-Studies</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
ATH
</td>
<td style="text-align:left;">
Anthropology
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ATH-Anthropology" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ATH-Anthropology</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
ATHSOC
</td>
<td style="text-align:left;">
Anthropology Sociology
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ATHSOC-Anthropology-Sociology" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ATHSOC-Anthropology-Sociology</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
BIO
</td>
<td style="text-align:left;">
Biology
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/BIO-Biology" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/BIO-Biology</a>
</td>
</tr>
</tbody>
</table>
<p>The <code>kable_styling</code> function is from the <code>kableExtra</code> package and provides some nice features to control kable style. Now we need to follow the link for each subject and get a dataframe of course numbers, names and urls for description, credit, and prerequisite info. The nice way of doing this is use purrr’s <code>map_dfr</code> function which is a more user friendly version of <code>*apply</code> and <code>rbind.data.frame</code>. As with apply, we’ll need a function to call on each subject.</p>
<pre class="r"><code>get_class_list &lt;- function(i){
  #get list of links on subject page
  class_links &lt;- html_nodes(read_html(subDF$url[i]), &#39;a&#39;)
  #turn links to text
  class_list &lt;- html_text(class_links)
  class_url &lt;- html_attr(class_links, &#39;href&#39;)
  classDF &lt;- data.frame(list=class_list, url=class_url)
  
  #only keep links for classes, each subject has 
  #classes starting in a different position
  classDF &lt;- classDF %&gt;% filter(str_detect(list,
                                  paste0(subDF$sub[i],&#39;-&#39;)))

    #We&#39;ll split on 1st space, discard everything after it and use
  #what&#39;s before it to build the required DF
  classDF &lt;- separate(classDF, list, 
                  into=c(&quot;id&quot;, &quot;name&quot;), sep = &quot; &quot;, extra = &quot;merge&quot;)
  
  #two theater classes have typos -THE-###
  #this is solely dealing with that
  classDF$id &lt;- str_replace(classDF$id, &quot;-THE&quot;, &quot;THE&quot;)

  #back to normal  
  classDF &lt;- separate(classDF, id, into = 
                        c(&quot;sub&quot;, &quot;number&quot;), sep=&quot;-&quot;)
  
  #the id field has the last part of the new url, we need the 
  #subject url with the course level (100,200,etc) then id
  classDF &lt;- mutate(classDF, url=paste0(base_url,url))
  
  #several class names have &#39;\n&#39; in them, let&#39;s remove that now
  classDF &lt;- mutate(classDF, name=str_replace_all(name, &#39;\n&#39;,&#39; &#39;))
  
  return(classDF)
}

classes &lt;- map_dfr(1:length(subDF$sub), get_class_list)
#add level variable (100,200, etc.)
classes &lt;- classes %&gt;% mutate(level=paste0(
          str_extract(number, &#39;[:digit:]&#39;),&quot;00&quot;))

kable(head(classes),&quot;html&quot;) %&gt;%  
  kable_styling( bootstrap_options = 
               c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, 
                 &quot;responsive&quot;), full_width=FALSE) </code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
sub
</th>
<th style="text-align:left;">
number
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
url
</th>
<th style="text-align:left;">
level
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
221
</td>
<td style="text-align:left;">
Financial Accounting
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/200/ACC-221" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/200/ACC-221</a>
</td>
<td style="text-align:left;">
200
</td>
</tr>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
222
</td>
<td style="text-align:left;">
Managerial Accounting
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/200/ACC-222" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/200/ACC-222</a>
</td>
<td style="text-align:left;">
200
</td>
</tr>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
318
</td>
<td style="text-align:left;">
Intermediate Accounting I
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/300/ACC-318" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/300/ACC-318</a>
</td>
<td style="text-align:left;">
300
</td>
</tr>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
320
</td>
<td style="text-align:left;">
Intermediate Accounting II
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/300/ACC-320" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/300/ACC-320</a>
</td>
<td style="text-align:left;">
300
</td>
</tr>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
323
</td>
<td style="text-align:left;">
Electronic Accounting &amp; Analysis
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/300/ACC-323" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/300/ACC-323</a>
</td>
<td style="text-align:left;">
300
</td>
</tr>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
423
</td>
<td style="text-align:left;">
Auditing
</td>
<td style="text-align:left;">
<a href="http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/400/ACC-423" class="uri">http://collegeofidaho.smartcatalogiq.com/en/current/Undergraduate-Catalog/Courses/ACC-Accounting/400/ACC-423</a>
</td>
<td style="text-align:left;">
400
</td>
</tr>
</tbody>
</table>
<p>Now we have the basic class info, on to some descriptive analysis.</p>
</div>
<div id="the-counts" class="section level1">
<h1>The Counts</h1>
<p>I should mention that this data is all from the current (2017-2018) catalogue, so it doesn’t reflect courses added, removed, or changed during this academic year. The most basic question is how many classes does CofI offer? Well, the 43 subjects offer 1034 courses, but how are they distributed across subject and level?</p>
<p>First, let’s group by subject to see which subjects offer the most and least courses.</p>
<pre class="r"><code>group_by(classes, sub) %&gt;% 
  summarise(Count = n()) %&gt;% 
  arrange(desc(Count)) %&gt;% head() %&gt;% 
  kable(&quot;html&quot;, caption = 
          &quot;Subjects with the Most Courses&quot;) %&gt;% 
  kable_styling( bootstrap_options = c(&quot;striped&quot;, 
                  &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width=FALSE) </code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:most">Table 1: </span>Subjects with the Most Courses
</caption>
<thead>
<tr>
<th style="text-align:left;">
sub
</th>
<th style="text-align:right;">
Count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
HIS
</td>
<td style="text-align:right;">
94
</td>
</tr>
<tr>
<td style="text-align:left;">
BIO
</td>
<td style="text-align:right;">
92
</td>
</tr>
<tr>
<td style="text-align:left;">
ENG
</td>
<td style="text-align:right;">
61
</td>
</tr>
<tr>
<td style="text-align:left;">
MUS
</td>
<td style="text-align:right;">
54
</td>
</tr>
<tr>
<td style="text-align:left;">
PSY
</td>
<td style="text-align:right;">
54
</td>
</tr>
<tr>
<td style="text-align:left;">
POE
</td>
<td style="text-align:right;">
51
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>group_by(classes, sub) %&gt;% summarise(Count = n()) %&gt;% 
  arrange(desc(Count)) %&gt;% tail() %&gt;% 
  kable(&quot;html&quot;, caption = &quot;Subjects with the Least Courses&quot;) %&gt;%
  kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, 
                        &quot;condensed&quot;, &quot;responsive&quot;), full_width=FALSE) </code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:least">Table 2: </span>Subjects with the Least Courses
</caption>
<thead>
<tr>
<th style="text-align:left;">
sub
</th>
<th style="text-align:right;">
Count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ASN
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
EDUSPA
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
ESL
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
FYS
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
ECN
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
STS
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
<p>Clearly, History doesn’t teach all of those classes every semester. It would be interesting to incorporate frequency of classes into this analysis, but that requires data from elsewhere since CofI doesn’t typically put course frequency into the catalogue.</p>
<p>Second, we can ignore subjects and look at the distribution of courses at different levels:</p>
<pre class="r"><code>group_by(classes, level) %&gt;% summarise(Count = n()) %&gt;% 
  kable(&quot;html&quot;, caption = &quot;Number of Courses at each Level&quot;) %&gt;%
  kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, 
                          &quot;condensed&quot;, &quot;responsive&quot;), full_width=FALSE) </code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:levelDist">Table 3: </span>Number of Courses at each Level
</caption>
<thead>
<tr>
<th style="text-align:left;">
level
</th>
<th style="text-align:right;">
Count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
000
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
174
</td>
</tr>
<tr>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
224
</td>
</tr>
<tr>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
415
</td>
</tr>
<tr>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
220
</td>
</tr>
</tbody>
</table>
<p>Finally, we can look at the distribution grouped by subject and level but because of the range of course counts at each subject, it’s probably better to work with proportions rather than counts. I’ll also order by decreasing proportion and note that if a subject (like accounting) doesn’t teach any classes of a particular level, we won’t see zeros in the list.</p>
<pre class="r"><code>subCnt &lt;- group_by(classes, sub) %&gt;% summarise(Count_s = n())
sublevDF &lt;- group_by(classes, sub, level) %&gt;% 
  summarise(Count_sl = n())

sublevDF &lt;- inner_join(sublevDF, subCnt, by=&quot;sub&quot;) %&gt;% 
  mutate(sub.prop = round(Count_sl/Count_s, 4)) %&gt;% 
  dplyr::select(sub, level, sub.prop) %&gt;% 
  arrange(desc(sub.prop))

kable(sublevDF, &quot;html&quot;, caption = &quot;Proportion of Subject&#39;s 
      Courses at each Level&quot;) %&gt;%  
  kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, 
          &quot;condensed&quot;, &quot;responsive&quot;), full_width=FALSE) %&gt;%
  scroll_box(width=&quot;100%&quot;, height = &quot;250px&quot;)</code></pre>
<div style="border: 1px solid #ddd; padding: 5px; overflow-y: scroll; height:250px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:sublevel">Table 4: </span>Proportion of Subject’s Courses at each Level
</caption>
<thead>
<tr>
<th style="text-align:left;">
sub
</th>
<th style="text-align:left;">
level
</th>
<th style="text-align:right;">
sub.prop
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ECN
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
1.0000
</td>
</tr>
<tr>
<td style="text-align:left;">
EDUSPA
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
1.0000
</td>
</tr>
<tr>
<td style="text-align:left;">
ESL
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
1.0000
</td>
</tr>
<tr>
<td style="text-align:left;">
FYS
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
1.0000
</td>
</tr>
<tr>
<td style="text-align:left;">
STS
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
1.0000
</td>
</tr>
<tr>
<td style="text-align:left;">
ATHSOC
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.8333
</td>
</tr>
<tr>
<td style="text-align:left;">
HHPA
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.8276
</td>
</tr>
<tr>
<td style="text-align:left;">
MFL
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.7273
</td>
</tr>
<tr>
<td style="text-align:left;">
HIS
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.6702
</td>
</tr>
<tr>
<td style="text-align:left;">
ASN
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.6667
</td>
</tr>
<tr>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.6250
</td>
</tr>
<tr>
<td style="text-align:left;">
HSC
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.6000
</td>
</tr>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.5833
</td>
</tr>
<tr>
<td style="text-align:left;">
CHI
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.5714
</td>
</tr>
<tr>
<td style="text-align:left;">
GER
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.5714
</td>
</tr>
<tr>
<td style="text-align:left;">
BIO
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.5652
</td>
</tr>
<tr>
<td style="text-align:left;">
POE
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.5294
</td>
</tr>
<tr>
<td style="text-align:left;">
SOC
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.5294
</td>
</tr>
<tr>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.5263
</td>
</tr>
<tr>
<td style="text-align:left;">
PHY
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.5161
</td>
</tr>
<tr>
<td style="text-align:left;">
EDU
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.5000
</td>
</tr>
<tr>
<td style="text-align:left;">
LAS
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.5000
</td>
</tr>
<tr>
<td style="text-align:left;">
LSP
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.5000
</td>
</tr>
<tr>
<td style="text-align:left;">
SPA
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.5000
</td>
</tr>
<tr>
<td style="text-align:left;">
SPE
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.5000
</td>
</tr>
<tr>
<td style="text-align:left;">
PSY
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.4815
</td>
</tr>
<tr>
<td style="text-align:left;">
ENV
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.4762
</td>
</tr>
<tr>
<td style="text-align:left;">
CSC
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.4667
</td>
</tr>
<tr>
<td style="text-align:left;">
ENG
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.4590
</td>
</tr>
<tr>
<td style="text-align:left;">
CHE
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.4324
</td>
</tr>
<tr>
<td style="text-align:left;">
ENG
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.4098
</td>
</tr>
<tr>
<td style="text-align:left;">
BUS
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.4048
</td>
</tr>
<tr>
<td style="text-align:left;">
FRE
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.4000
</td>
</tr>
<tr>
<td style="text-align:left;">
JOURN
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.4000
</td>
</tr>
<tr>
<td style="text-align:left;">
MUSAP
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.4000
</td>
</tr>
<tr>
<td style="text-align:left;">
REL
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.4000
</td>
</tr>
<tr>
<td style="text-align:left;">
THE
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.4000
</td>
</tr>
<tr>
<td style="text-align:left;">
HHP
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.3864
</td>
</tr>
<tr>
<td style="text-align:left;">
BUS
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.3810
</td>
</tr>
<tr>
<td style="text-align:left;">
EDU
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.3750
</td>
</tr>
<tr>
<td style="text-align:left;">
GEO
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.3750
</td>
</tr>
<tr>
<td style="text-align:left;">
GEO
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.3750
</td>
</tr>
<tr>
<td style="text-align:left;">
REL
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.3667
</td>
</tr>
<tr>
<td style="text-align:left;">
MS
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.3636
</td>
</tr>
<tr>
<td style="text-align:left;">
MUS
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.3519
</td>
</tr>
<tr>
<td style="text-align:left;">
ART
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.3333
</td>
</tr>
<tr>
<td style="text-align:left;">
ASN
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.3333
</td>
</tr>
<tr>
<td style="text-align:left;">
CHE
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.3243
</td>
</tr>
<tr>
<td style="text-align:left;">
HHP
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.3182
</td>
</tr>
<tr>
<td style="text-align:left;">
THE
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.3111
</td>
</tr>
<tr>
<td style="text-align:left;">
FRE
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.3000
</td>
</tr>
<tr>
<td style="text-align:left;">
FRE
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.3000
</td>
</tr>
<tr>
<td style="text-align:left;">
JOURN
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.3000
</td>
</tr>
<tr>
<td style="text-align:left;">
JOURN
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.3000
</td>
</tr>
<tr>
<td style="text-align:left;">
ATH
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.2941
</td>
</tr>
<tr>
<td style="text-align:left;">
ATH
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2941
</td>
</tr>
<tr>
<td style="text-align:left;">
CHI
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.2857
</td>
</tr>
<tr>
<td style="text-align:left;">
GER
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2857
</td>
</tr>
<tr>
<td style="text-align:left;">
MS
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2727
</td>
</tr>
<tr>
<td style="text-align:left;">
MAT
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.2703
</td>
</tr>
<tr>
<td style="text-align:left;">
MAT
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.2703
</td>
</tr>
<tr>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.2632
</td>
</tr>
<tr>
<td style="text-align:left;">
ART
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.2619
</td>
</tr>
<tr>
<td style="text-align:left;">
MUS
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2593
</td>
</tr>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2500
</td>
</tr>
<tr>
<td style="text-align:left;">
GEO
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2500
</td>
</tr>
<tr>
<td style="text-align:left;">
LAS
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2500
</td>
</tr>
<tr>
<td style="text-align:left;">
LSP
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.2500
</td>
</tr>
<tr>
<td style="text-align:left;">
SPE
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.2500
</td>
</tr>
<tr>
<td style="text-align:left;">
SPE
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.2500
</td>
</tr>
<tr>
<td style="text-align:left;">
MAT
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2432
</td>
</tr>
<tr>
<td style="text-align:left;">
PSY
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.2407
</td>
</tr>
<tr>
<td style="text-align:left;">
ATH
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.2353
</td>
</tr>
<tr>
<td style="text-align:left;">
SPA
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.2333
</td>
</tr>
<tr>
<td style="text-align:left;">
MAT
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.2162
</td>
</tr>
<tr>
<td style="text-align:left;">
ART
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.2143
</td>
</tr>
<tr>
<td style="text-align:left;">
CSC
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.2000
</td>
</tr>
<tr>
<td style="text-align:left;">
CSC
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.2000
</td>
</tr>
<tr>
<td style="text-align:left;">
HSC
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.2000
</td>
</tr>
<tr>
<td style="text-align:left;">
HSC
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.2000
</td>
</tr>
<tr>
<td style="text-align:left;">
MUSAP
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.2000
</td>
</tr>
<tr>
<td style="text-align:left;">
MUSAP
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.2000
</td>
</tr>
<tr>
<td style="text-align:left;">
MUSAP
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.2000
</td>
</tr>
<tr>
<td style="text-align:left;">
BIO
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1957
</td>
</tr>
<tr>
<td style="text-align:left;">
PHY
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1935
</td>
</tr>
<tr>
<td style="text-align:left;">
ART
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1905
</td>
</tr>
<tr>
<td style="text-align:left;">
ENV
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1905
</td>
</tr>
<tr>
<td style="text-align:left;">
ENV
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1905
</td>
</tr>
<tr>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1875
</td>
</tr>
<tr>
<td style="text-align:left;">
MUS
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1852
</td>
</tr>
<tr>
<td style="text-align:left;">
MUS
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1852
</td>
</tr>
<tr>
<td style="text-align:left;">
MFL
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1818
</td>
</tr>
<tr>
<td style="text-align:left;">
MS
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1818
</td>
</tr>
<tr>
<td style="text-align:left;">
MS
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1818
</td>
</tr>
<tr>
<td style="text-align:left;">
THE
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1778
</td>
</tr>
<tr>
<td style="text-align:left;">
ATH
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1765
</td>
</tr>
<tr>
<td style="text-align:left;">
POE
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1765
</td>
</tr>
<tr>
<td style="text-align:left;">
POE
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1765
</td>
</tr>
<tr>
<td style="text-align:left;">
SOC
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1765
</td>
</tr>
<tr>
<td style="text-align:left;">
SOC
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1765
</td>
</tr>
<tr>
<td style="text-align:left;">
ACC
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1667
</td>
</tr>
<tr>
<td style="text-align:left;">
ATHSOC
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1667
</td>
</tr>
<tr>
<td style="text-align:left;">
PSY
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1667
</td>
</tr>
<tr>
<td style="text-align:left;">
SPA
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1667
</td>
</tr>
<tr>
<td style="text-align:left;">
PHY
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1613
</td>
</tr>
<tr>
<td style="text-align:left;">
HHP
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1591
</td>
</tr>
<tr>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1579
</td>
</tr>
<tr>
<td style="text-align:left;">
BIO
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1522
</td>
</tr>
<tr>
<td style="text-align:left;">
HIS
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1489
</td>
</tr>
<tr>
<td style="text-align:left;">
CHI
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1429
</td>
</tr>
<tr>
<td style="text-align:left;">
ENV
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1429
</td>
</tr>
<tr>
<td style="text-align:left;">
GER
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1429
</td>
</tr>
<tr>
<td style="text-align:left;">
HIS
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1383
</td>
</tr>
<tr>
<td style="text-align:left;">
HHPA
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1379
</td>
</tr>
<tr>
<td style="text-align:left;">
HHP
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1364
</td>
</tr>
<tr>
<td style="text-align:left;">
CHE
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1351
</td>
</tr>
<tr>
<td style="text-align:left;">
CSC
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.1333
</td>
</tr>
<tr>
<td style="text-align:left;">
REL
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1333
</td>
</tr>
<tr>
<td style="text-align:left;">
PHY
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.1290
</td>
</tr>
<tr>
<td style="text-align:left;">
EDU
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1250
</td>
</tr>
<tr>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1250
</td>
</tr>
<tr>
<td style="text-align:left;">
LAS
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1250
</td>
</tr>
<tr>
<td style="text-align:left;">
LAS
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1250
</td>
</tr>
<tr>
<td style="text-align:left;">
LSP
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1250
</td>
</tr>
<tr>
<td style="text-align:left;">
LSP
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.1250
</td>
</tr>
<tr>
<td style="text-align:left;">
BUS
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1190
</td>
</tr>
<tr>
<td style="text-align:left;">
POE
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1176
</td>
</tr>
<tr>
<td style="text-align:left;">
SOC
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1176
</td>
</tr>
<tr>
<td style="text-align:left;">
ENG
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.1148
</td>
</tr>
<tr>
<td style="text-align:left;">
PSY
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1111
</td>
</tr>
<tr>
<td style="text-align:left;">
THE
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1111
</td>
</tr>
<tr>
<td style="text-align:left;">
CHE
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
0.1081
</td>
</tr>
<tr>
<td style="text-align:left;">
REL
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1000
</td>
</tr>
<tr>
<td style="text-align:left;">
SPA
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.1000
</td>
</tr>
<tr>
<td style="text-align:left;">
BUS
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.0952
</td>
</tr>
<tr>
<td style="text-align:left;">
MFL
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.0909
</td>
</tr>
<tr>
<td style="text-align:left;">
BIO
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.0870
</td>
</tr>
<tr>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
400
</td>
<td style="text-align:right;">
0.0625
</td>
</tr>
<tr>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.0526
</td>
</tr>
<tr>
<td style="text-align:left;">
HIS
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.0426
</td>
</tr>
<tr>
<td style="text-align:left;">
HHPA
</td>
<td style="text-align:left;">
300
</td>
<td style="text-align:right;">
0.0345
</td>
</tr>
<tr>
<td style="text-align:left;">
MUS
</td>
<td style="text-align:left;">
000
</td>
<td style="text-align:right;">
0.0185
</td>
</tr>
<tr>
<td style="text-align:left;">
ENG
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:right;">
0.0164
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="course-name-word-cloud" class="section level1">
<h1>Course Name Word Cloud</h1>
<p>Now for a different type of counting, let’s make a word cloud of words in course names. I would rather use the <code>wordcloud2</code> package which allows for some interesting visualizations, but it relies on javascript which doesn’t play well with a static site generator (but a shiny app would work). We’ll need to load some additional packages and split up the name data into words and frequencies, after doing a little cleaning of the names.</p>
<pre class="r"><code>library(devtools)
library(tm)
library(SnowballC)
library(wordcloud)

#Load and clean
wordFreq &lt;- Corpus(VectorSource(classes$name))
wordFreq &lt;- tm_map(wordFreq, PlainTextDocument)
wordFreq &lt;- tm_map(wordFreq, content_transformer(tolower))
wordFreq &lt;- tm_map(wordFreq, removePunctuation)
wordFreq &lt;- tm_map(wordFreq, removeWords, c(&quot;a&quot;, &quot;the&quot;, &quot;and&quot;, &quot;for&quot;))
wordFreq &lt;- tm_map(wordFreq, stripWhitespace)

#build TDM and DF of words and frequencies
wordTDM &lt;- TermDocumentMatrix(wordFreq)
wordTDM&lt;- wordTDM %&gt;% as.matrix() %&gt;% rowSums() %&gt;% sort()
wordDF &lt;- data.frame(word=names(wordTDM), freq=wordTDM)

pal &lt;- brewer.pal(9, &quot;Purples&quot;)[-(1:3)]

wordcloud(words=wordDF$word, freq=wordDF$freq, 
          min.freq = 6,  random.order = FALSE, rot.per = .25, 
          scale = c(3,.5), colors = pal)</code></pre>
<p><img src="/post/2018-05-05-counting-class_files/figure-html/wc_init-1.png" width="672" /></p>
<p>The <em>special topics</em> and <em>independent study</em> classes that almost all subjects have along with <em>lab</em> and <em>introduction</em> are not too surprising. History, with it’s high course count and the fact that it appears in other subjects (<em>History of Math</em> or <em>Music History</em>) is also not surprising. Beyond that, the wordcloud shows a nice diversity of disciplines and unifying ideas.</p>
<p>Clearly this is just scratching the surface of exploring a college’s curriculum and it would be interesting to compare similar schools in addition to exploring deeper into course descriptions and the links formed by prerequisites and major/minor requirements.</p>
</div>
